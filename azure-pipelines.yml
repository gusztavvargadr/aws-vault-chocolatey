trigger:
  branches:
    include:
      - '*'
  tags:
    include:
      - '*'
pr: none

variables:
  - group: pipeline

stages:
  - stage: commit
    displayName: Commit

    jobs:
      - template: ./build/azp/azure-pipelines.build.yml

  - stage: acceptance
    displayName: Acceptance

    variables:
      - group: stage-acceptance

    jobs:
    - template: ./build/azp/azure-pipelines.deploy.yml

  # - stage: deployChocolateyOrg
  #   displayName: Deploy - chocolatey.org
  #   variables:
  #   - group: chocolatey-source-chocolateyorg
  #   - group: version-latest
  #   condition: and(succeeded(), startsWith(variables['Build.SourceBranch'], 'refs/tags/'))

  #   jobs:
  #   - template: build/azp/azure-pipelines.deploy.yml
